# This workflow will run our tests, generate an lcov code coverage file,
# and send that coverage to Coveralls 

name: Code Coverage

on:
  push:
    branches-ignore: dev/*
  pull_request:

jobs:
  unit_coverage:
    uses: yext/slapshot-reusable-workflows/.github/workflows/coverage.yml@dev/coverage-file-param
    with:
      test_script: npm run test
      coverage_file: coverage/unit/lcov.info
    secrets:
      caller_github_token: ${{ secrets.GITHUB_TOKEN }}
  # visual_coverage:
  #   uses: yext/slapshot-reusable-workflows/.github/workflows/coverage.yml@dev/coverage-file-param
  #   with:
  #     coverage_file: coverage/visual/lcov.info
  #   secrets:
  #     caller_github_token: ${{ secrets.GITHUB_TOKEN }}
